--================================
-- Awaa Bot - Fish It AUTO Webhook
-- FIXED UI (NO BLACK SCREEN)
--================================

-- SERVICES
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local Player = Players.LocalPlayer

-- WAIT PLAYERGUI (PENTING!)
local PlayerGui = Player:WaitForChild("PlayerGui")

-- CONFIG
local WEBHOOK_URL = ""
local AUTO_RUNNING = false

-- TYPE COLOR
local FishTypeColor = {
    Mythic = 15158332,
    Secret = 10181046
}

-- GET WEIGHT
local function GetWeight(tool)
    if tool:FindFirstChild("Weight") and tool.Weight:IsA("NumberValue") then
        return string.format("%.2f kg", tool.Weight.Value)
    end
    return "Unknown"
end

-- DETECT TYPE
local function GetFishType(name)
    name = string.lower(name)
    if string.find(name, "secret") then
        return "Secret"
    elseif string.find(name, "myth") then
        return "Mythic"
    end
    return nil
end

-- SEND WEBHOOK
local function SendWebhook(fishName, fishWeight, fishType)
    if WEBHOOK_URL == "" then return end

    local data = {
        username = "Awaa Bot",
        embeds = {{
            title = "üé£ Fish Obtained!",
            color = FishTypeColor[fishType],
            fields = {
                { name = "üë§ Player", value = Player.Name, inline = true },
                { name = "üêü Fish", value = fishName, inline = true },
                { name = "‚öñÔ∏è Weight", value = fishWeight, inline = true },
                { name = "üåü Type", value = fishType, inline = true }
            },
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }

    local req = http_request or request or syn.request
    if req then
        req({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = { ["Content-Type"] = "application/json" },
            Body = HttpService:JSONEncode(data)
        })
    end
end

-- AUTO DETECT
local function StartAuto()
    if AUTO_RUNNING then return end
    AUTO_RUNNING = true

    local Backpack = Player:WaitForChild("Backpack")
    Backpack.ChildAdded:Connect(function(tool)
        task.wait(0.2)
        local fishType = GetFishType(tool.Name)
        if fishType then
            SendWebhook(tool.Name, GetWeight(tool), fishType)
        end
    end)
end

    -- UI SAFE MOBILE FIX
local gui = Instance.new("ScreenGui")
gui.Name = "AwaaBotUI"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

local frame = Instance.new("Frame")
frame.Parent = gui
frame.Size = UDim2.fromScale(0.45, 0.4) -- AUTO SCALE
frame.Position = UDim2.fromScale(0.52, 0.05) -- KANAN ATAS
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)

-- UI SCALE (PENTING HP)
local scale = Instance.new("UIScale", frame)
scale.Scale = 0.9

-- TITLE
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.fromScale(1, 0.18)
title.BackgroundTransparency = 1
title.Text = "Awaa Bot"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

-- CLOSE
local closeBtn = Instance.new("TextButton", frame)
closeBtn.Size = UDim2.fromScale(0.12, 0.18)
closeBtn.Position = UDim2.fromScale(0.86, 0)
closeBtn.Text = "X"
closeBtn.BackgroundColor3 = Color3.fromRGB(150,0,0)
closeBtn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", closeBtn)

-- MINIMIZE
local miniBtn = Instance.new("TextButton", frame)
miniBtn.Size = UDim2.fromScale(0.12, 0.18)
miniBtn.Position = UDim2.fromScale(0.72, 0)
miniBtn.Text = "-"
miniBtn.BackgroundColor3 = Color3.fromRGB(90,90,90)
miniBtn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", miniBtn)

-- WEBHOOK BOX
local box = Instance.new("TextBox", frame)
box.Size = UDim2.fromScale(0.9, 0.25)
box.Position = UDim2.fromScale(0.05, 0.25)
box.PlaceholderText = "Discord Webhook"
box.ClearTextOnFocus = false
box.TextWrapped = true
box.TextScaled = true
box.BackgroundColor3 = Color3.fromRGB(45,45,45)
box.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", box)

-- START
local startBtn = Instance.new("TextButton", frame)
startBtn.Size = UDim2.fromScale(0.9, 0.22)
startBtn.Position = UDim2.fromScale(0.05, 0.55)
startBtn.Text = "START AUTO"
startBtn.BackgroundColor3 = Color3.fromRGB(90,0,150)
startBtn.TextColor3 = Color3.new(1,1,1)
startBtn.TextScaled = true
Instance.new("UICorner", startBtn)

-- STATUS
local status = Instance.new("TextLabel", frame)
status.Size = UDim2.fromScale(1, 0.15)
status.Position = UDim2.fromScale(0, 0.8)
status.BackgroundTransparency = 1
status.TextColor3 = Color3.fromRGB(0,255,0)
status.Text = ""
status.TextScaled = true

-- MINIMIZE LOGIC
miniBtn.MouseButton1Click:Connect(function()
    frame.Visible = false
    local open = Instance.new("TextButton", gui)
    open.Size = UDim2.fromScale(0.25, 0.08)
    open.Position = UDim2.fromScale(0.7, 0.5)
    open.Text = "Open Awaa Bot"
    open.BackgroundColor3 = Color3.fromRGB(90,0,150)
    open.TextColor3 = Color3.new(1,1,1)
    open.TextScaled = true
    Instance.new("UICorner", open)

    open.MouseButton1Click:Connect(function()
        frame.Visible = true
        open:Destroy()
    end)
end)

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)
